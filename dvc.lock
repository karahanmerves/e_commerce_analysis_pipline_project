schema: '2.0'
stages:
  fetch_data:
    cmd: python src/fetch_data.py
    deps:
    - path: src/fetch_data.py
      hash: md5
      md5: 4dae3ac67c1467a71b263c274eb35906
      size: 560
    outs:
    - path: data/raw/sales_data.csv
      hash: md5
      md5: d7b4c45c967c212a63be5eb56642f19a
      size: 51443638
  preprocess:
    cmd: python src/preprocess.py
    deps:
    - path: data/raw/sales_data.csv
      hash: md5
      md5: d7b4c45c967c212a63be5eb56642f19a
      size: 51443638
    - path: src/preprocess.py
      hash: md5
      md5: ee223c1544d48d4fe77397d7e1e9c5d0
      size: 1798
    outs:
    - path: data/processed/test_data.csv
      hash: md5
      md5: 76e2b4b4c50c4e09ad433071bb4c0c1a
      size: 13360925
    - path: data/processed/train_data.csv
      hash: md5
      md5: f33c22d2d94b138f456f0758147fff33
      size: 53439180
  train:
    cmd: python src/train.py
    deps:
    - path: data/processed/train_data.csv
      hash: md5
      md5: f33c22d2d94b138f456f0758147fff33
      size: 53439180
    - path: src/train.py
      hash: md5
      md5: e98cd91a3967a7a4e3bb07c987a95a71
      size: 2327
    params:
      params.yaml:
        train.rf_bootstrap: true
        train.rf_max_depth: 10
        train.rf_min_samples_leaf: 1
        train.rf_min_samples_split: 2
        train.rf_n_estimators: 200
        train.xgboost_colsample_bytree: 0.8
        train.xgboost_learning_rate: 0.2
        train.xgboost_max_depth: 9
        train.xgboost_n_estimators: 200
        train.xgboost_subsample: 0.8
    outs:
    - path: models/LinearRegression.pkl
      hash: md5
      md5: 2167da7e1f705f06cd0de7ba8f469abd
      size: 1097
    - path: models/RandomForest.pkl
      hash: md5
      md5: f75356a8da0717406f1c8c4cde08ccf5
      size: 18928833
    - path: models/XGBoost.pkl
      hash: md5
      md5: d2dcfc0ecb3efedce2ee32e1221aa447
      size: 5176814
  mlflow_tracking:
    cmd: python src/mlflow_tracking.py
    deps:
    - path: models/LinearRegression.pkl
      hash: md5
      md5: 2167da7e1f705f06cd0de7ba8f469abd
      size: 1097
    - path: models/RandomForest.pkl
      hash: md5
      md5: f75356a8da0717406f1c8c4cde08ccf5
      size: 18928833
    - path: models/XGBoost.pkl
      hash: md5
      md5: d2dcfc0ecb3efedce2ee32e1221aa447
      size: 5176814
    - path: src/mlflow_tracking.py
      hash: md5
      md5: fc707b2b89f2dcbffed0b2ced88a716d
      size: 833
    outs:
    - path: mlruns/
      hash: md5
      md5: e8e9fd7bf9c6ae2f087c826c56b41f2b.dir
      size: 24097780
      nfiles: 15
