schema: '2.0'
stages:
  fetch_data:
    cmd: python src/fetch_data.py
    deps:
    - path: src/fetch_data.py
      hash: md5
      md5: 4dae3ac67c1467a71b263c274eb35906
      size: 560
    outs:
    - path: data/raw/sales_data.csv
      hash: md5
      md5: d7b4c45c967c212a63be5eb56642f19a
      size: 51443638
  preprocess:
    cmd: python src/preprocess.py
    deps:
    - path: data/raw/sales_data.csv
      hash: md5
      md5: d7b4c45c967c212a63be5eb56642f19a
      size: 51443638
    - path: src/preprocess.py
      hash: md5
      md5: eb75283be25ded5bc958764cb4c0bc9c
      size: 1344
    outs:
    - path: data/processed/test_data.csv
      hash: md5
      md5: 1f583ed4bd21fdc60fb96d873cac0b03
      size: 14664165
    - path: data/processed/train_data.csv
      hash: md5
      md5: 913ba098e3ff105e722f5eac2727ba2e
      size: 58650133
  train:
    cmd: python src/train.py
    deps:
    - path: data/processed/train_data.csv
      hash: md5
      md5: 913ba098e3ff105e722f5eac2727ba2e
      size: 58650133
    - path: src/train.py
      hash: md5
      md5: e98cd91a3967a7a4e3bb07c987a95a71
      size: 2327
    params:
      params.yaml:
        train.rf_bootstrap: true
        train.rf_max_depth: 10
        train.rf_min_samples_leaf: 1
        train.rf_min_samples_split: 2
        train.rf_n_estimators: 200
        train.xgboost_colsample_bytree: 0.8
        train.xgboost_learning_rate: 0.1
        train.xgboost_max_depth: 6
        train.xgboost_n_estimators: 100
        train.xgboost_subsample: 0.8
    outs:
    - path: models/LinearRegression.pkl
      hash: md5
      md5: 975634e98e2156ee02b7bcd050804c57
      size: 1097
    - path: models/RandomForest.pkl
      hash: md5
      md5: dcf788a099db7e31a625fb6147deb39a
      size: 5661681
    - path: models/XGBoost.pkl
      hash: md5
      md5: 2ea507f70ca8797b5f847bc031dae7ac
      size: 416572
  mlflow_tracking:
    cmd: python src/mlflow_tracking.py
    deps:
    - path: models/LinearRegression.pkl
      hash: md5
      md5: 975634e98e2156ee02b7bcd050804c57
      size: 1097
    - path: models/RandomForest.pkl
      hash: md5
      md5: dcf788a099db7e31a625fb6147deb39a
      size: 5661681
    - path: models/XGBoost.pkl
      hash: md5
      md5: 2ea507f70ca8797b5f847bc031dae7ac
      size: 416572
    - path: src/mlflow_tracking.py
      hash: md5
      md5: fc707b2b89f2dcbffed0b2ced88a716d
      size: 833
    outs:
    - path: mlruns/
      hash: md5
      md5: 02583e33655829cd134e896a4b4af1d4.dir
      size: 6069079
      nfiles: 15
